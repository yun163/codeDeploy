#!/bin/bash
which svc
if [[ $? != 0 ]]; then
apt-get update
# check wget installed
  which wget
  if [[ $? != 0 ]]; then
	  apt-get -y install wget
	  if [[ $? != 0 ]]; then
	  	  echo "failed install wget"
	  	  exit -1
	  fi
  fi
# check gcc installed
  which gcc
  if [[ $? != 0 ]]; then
	apt-get update && \
    apt-get install build-essential software-properties-common -y && \
    add-apt-repository ppa:ubuntu-toolchain-r/test -y && \
    apt-get update && \
    apt-get install gcc-snapshot -y && \
    apt-get update && \
    apt-get install gcc-6 g++-6 -y && \
    update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-6 60 --slave /usr/bin/g++ g++ /usr/bin/g++-6 && \
    apt-get install gcc-4.8 g++-4.8 -y && \
    update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.8 60 --slave /usr/bin/g++ g++ /usr/bin/g++-4.8;
  fi
# install svc
  apt install daemontools
  cd /tmp
  wget https://cr.yp.to/daemontools/daemontools-0.76.tar.gz
  gunzip daemontools-0.76.tar.gz
  tar -xpf daemontools-0.76.tar
  rm -f daemontools-0.76.tar
  cd admin/daemontools-0.76

  ./package/install
fi

